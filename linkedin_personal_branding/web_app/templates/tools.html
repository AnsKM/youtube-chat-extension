{% extends "base.html" %}

{% block title %}Tools Center - LinkedIn Personal Branding{% endblock %}

{% block header %}Tools Center{% endblock %}
{% block subtitle %}Automation tools and utilities for your LinkedIn growth{% endblock %}

{% block content %}
<!-- Tools Overview -->
<div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="metric-card">
        <div class="flex items-center justify-between mb-2">
            <h3 class="text-sm font-medium text-gray-600">Available Tools</h3>
            <i class="fas fa-tools text-primary"></i>
        </div>
        <div class="text-2xl font-bold text-gray-900">{{ tools|length }}</div>
        <div class="text-sm text-gray-500">Ready to use</div>
    </div>
    
    <div class="metric-card">
        <div class="flex items-center justify-between mb-2">
            <h3 class="text-sm font-medium text-gray-600">Last Scrape</h3>
            <i class="fas fa-download text-secondary"></i>
        </div>
        <div class="text-2xl font-bold text-gray-900">2d</div>
        <div class="text-sm text-gray-500">Days ago</div>
    </div>
    
    <div class="metric-card">
        <div class="flex items-center justify-between mb-2">
            <h3 class="text-sm font-medium text-gray-600">Automations</h3>
            <i class="fas fa-robot text-accent"></i>
        </div>
        <div class="text-2xl font-bold text-gray-900">3</div>
        <div class="text-sm text-gray-500">Active</div>
    </div>
    
    <div class="metric-card">
        <div class="flex items-center justify-between mb-2">
            <h3 class="text-sm font-medium text-gray-600">API Calls</h3>
            <i class="fas fa-chart-bar text-primary"></i>
        </div>
        <div class="text-2xl font-bold text-gray-900">147</div>
        <div class="text-sm text-gray-500">This month</div>
    </div>
</div>

<!-- Main Tools Grid -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    
    <!-- Data Collection Tools -->
    <div class="card">
        <h3 class="text-lg font-semibold mb-4">üìä Data Collection</h3>
        <div class="space-y-4">
            
            <!-- Profile Scraper -->
            <div class="p-4 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center">
                        <i class="fas fa-download text-primary mr-3"></i>
                        <div>
                            <h4 class="font-medium">LinkedIn Profile Scraper</h4>
                            <p class="text-sm text-gray-600">Extract current profile data and metrics</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        Active
                    </span>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="runProfileScraper()" class="btn-primary text-sm flex-1">
                        <i class="fas fa-play mr-2"></i>
                        Run Scraper
                    </button>
                    <button onclick="configureApi()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
                
                <div class="mt-3 text-xs text-gray-500">
                    Last run: 2 days ago ‚Ä¢ Next scheduled: Daily at 9:00 AM
                </div>
            </div>
            
            <!-- Competitor Analysis -->
            <div class="p-4 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center">
                        <i class="fas fa-search text-secondary mr-3"></i>
                        <div>
                            <h4 class="font-medium">Competitor Analysis</h4>
                            <p class="text-sm text-gray-600">Track competitors' profiles and content</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                        Setup Needed
                    </span>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="setupCompetitorAnalysis()" class="btn-secondary text-sm flex-1">
                        <i class="fas fa-plus mr-2"></i>
                        Setup
                    </button>
                    <button onclick="viewCompetitors()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>
            
            <!-- Engagement Tracker -->
            <div class="p-4 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center">
                        <i class="fas fa-chart-line text-accent mr-3"></i>
                        <div>
                            <h4 class="font-medium">Engagement Tracker</h4>
                            <p class="text-sm text-gray-600">Monitor post performance and interactions</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        Active
                    </span>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="trackEngagement()" class="btn-accent text-sm flex-1">
                        <i class="fas fa-sync mr-2"></i>
                        Sync Now
                    </button>
                    <button onclick="viewEngagementData()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                        <i class="fas fa-chart-bar"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Content Generation Tools -->
    <div class="card">
        <h3 class="text-lg font-semibold mb-4">‚ú® Content Generation</h3>
        <div class="space-y-4">
            
            <!-- AI Content Generator -->
            <div class="p-4 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center">
                        <i class="fas fa-magic text-primary mr-3"></i>
                        <div>
                            <h4 class="font-medium">AI Content Generator</h4>
                            <p class="text-sm text-gray-600">Generate AI-powered LinkedIn posts</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        Ready
                    </span>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="generateContent()" class="btn-primary text-sm flex-1">
                        <i class="fas fa-robot mr-2"></i>
                        Generate
                    </button>
                    <button onclick="configureContentAI()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
                
                <div class="mt-3 text-xs text-gray-500">
                    Generated this month: 23 posts ‚Ä¢ Avg quality score: 8.4/10
                </div>
            </div>
            
            <!-- Banner Generator -->
            <div class="p-4 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center">
                        <i class="fas fa-image text-secondary mr-3"></i>
                        <div>
                            <h4 class="font-medium">Banner Generator</h4>
                            <p class="text-sm text-gray-600">Create AI-powered LinkedIn banners</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                        Ready
                    </span>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="generateBanner()" class="btn-secondary text-sm flex-1">
                        <i class="fas fa-palette mr-2"></i>
                        Create Banner
                    </button>
                    <button onclick="viewBannerTemplates()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                        <i class="fas fa-images"></i>
                    </button>
                </div>
            </div>
            
            <!-- Hashtag Research -->
            <div class="p-4 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div class="flex items-center">
                        <i class="fas fa-hashtag text-accent mr-3"></i>
                        <div>
                            <h4 class="font-medium">Hashtag Research</h4>
                            <p class="text-sm text-gray-600">Find trending hashtags for your niche</p>
                        </div>
                    </div>
                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                        Beta
                    </span>
                </div>
                
                <div class="flex space-x-3">
                    <button onclick="researchHashtags()" class="btn-accent text-sm flex-1">
                        <i class="fas fa-search mr-2"></i>
                        Research
                    </button>
                    <button onclick="saveHashtagSet()" class="bg-gray-600 text-white px-3 py-2 rounded text-sm hover:bg-gray-700 transition-colors">
                        <i class="fas fa-save"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Automation Workflows -->
<div class="card mb-8">
    <h3 class="text-lg font-semibold mb-4">ü§ñ Automation Workflows</h3>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Daily Automation -->
        <div class="p-4 border border-green-200 bg-green-50 rounded-lg">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center">
                    <i class="fas fa-clock text-green-600 mr-2"></i>
                    <h4 class="font-medium text-green-800">Daily Profile Sync</h4>
                </div>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-200 text-green-800">
                    Active
                </span>
            </div>
            <p class="text-sm text-green-700 mb-3">Automatically scrape profile data every morning at 9:00 AM</p>
            
            <div class="flex space-x-2">
                <button onclick="toggleAutomation('daily-sync')" class="bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700">
                    Pause
                </button>
                <button onclick="configureAutomation('daily-sync')" class="text-green-600 hover:text-green-800 text-xs">
                    Configure
                </button>
            </div>
        </div>
        
        <!-- Weekly Report -->
        <div class="p-4 border border-blue-200 bg-blue-50 rounded-lg">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center">
                    <i class="fas fa-chart-pie text-blue-600 mr-2"></i>
                    <h4 class="font-medium text-blue-800">Weekly Reports</h4>
                </div>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-200 text-blue-800">
                    Active
                </span>
            </div>
            <p class="text-sm text-blue-700 mb-3">Generate and email weekly progress reports every Sunday</p>
            
            <div class="flex space-x-2">
                <button onclick="toggleAutomation('weekly-report')" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700">
                    Pause
                </button>
                <button onclick="configureAutomation('weekly-report')" class="text-blue-600 hover:text-blue-800 text-xs">
                    Configure
                </button>
            </div>
        </div>
        
        <!-- Content Scheduler -->
        <div class="p-4 border border-gray-200 bg-gray-50 rounded-lg">
            <div class="flex items-center justify-between mb-3">
                <div class="flex items-center">
                    <i class="fas fa-calendar text-gray-600 mr-2"></i>
                    <h4 class="font-medium text-gray-800">Content Scheduler</h4>
                </div>
                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-200 text-gray-800">
                    Inactive
                </span>
            </div>
            <p class="text-sm text-gray-700 mb-3">Auto-schedule generated content at optimal times</p>
            
            <div class="flex space-x-2">
                <button onclick="toggleAutomation('content-scheduler')" class="bg-gray-600 text-white px-3 py-1 rounded text-xs hover:bg-gray-700">
                    Activate
                </button>
                <button onclick="configureAutomation('content-scheduler')" class="text-gray-600 hover:text-gray-800 text-xs">
                    Configure
                </button>
            </div>
        </div>
    </div>
</div>

<!-- API Configuration -->
<div class="card">
    <h3 class="text-lg font-semibold mb-4">‚öôÔ∏è API Configuration</h3>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        
        <!-- Current API Status -->
        <div>
            <h4 class="font-medium mb-3">API Status</h4>
            <div class="space-y-3">
                <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle text-green-600 mr-2"></i>
                        <span class="text-sm font-medium">Apify Token</span>
                    </div>
                    <span class="text-xs text-green-600">Connected</span>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>
                        <span class="text-sm font-medium">Google AI (Gemini)</span>
                    </div>
                    <span class="text-xs text-yellow-600">Not Configured</span>
                </div>
                
                <div class="flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded">
                    <div class="flex items-center">
                        <i class="fas fa-times-circle text-gray-600 mr-2"></i>
                        <span class="text-sm font-medium">LinkedIn API</span>
                    </div>
                    <span class="text-xs text-gray-600">Not Available</span>
                </div>
            </div>
        </div>
        
        <!-- API Configuration Form -->
        <div>
            <h4 class="font-medium mb-3">Update Configuration</h4>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Apify Token</label>
                    <div class="flex space-x-2">
                        <input type="password" class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm" placeholder="Enter token...">
                        <button onclick="updateApiToken('apify')" class="btn-primary text-sm">Update</button>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Google AI API Key</label>
                    <div class="flex space-x-2">
                        <input type="password" class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm" placeholder="Enter API key...">
                        <button onclick="updateApiToken('google')" class="btn-secondary text-sm">Update</button>
                    </div>
                </div>
                
                <div class="pt-3 border-t">
                    <button onclick="testAllConnections()" class="btn-accent text-sm w-full">
                        <i class="fas fa-plug mr-2"></i>
                        Test All Connections
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Tool Results Modal -->
<div id="toolModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center h-full p-4">
        <div class="bg-white rounded-lg w-full max-w-2xl max-h-96 overflow-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-semibold" id="toolModalTitle">Tool Results</h3>
                    <button onclick="closeToolModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="toolModalContent" class="text-sm text-gray-700"></div>
                <div class="mt-4 flex justify-end space-x-3">
                    <button onclick="closeToolModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800">
                        Close
                    </button>
                    <button onclick="exportResults()" class="btn-primary">
                        Export Results
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Tool execution functions
function runProfileScraper() {
    showToolModal('Profile Scraper', 'Running profile scraper...');
    
    fetch('/api/scrape-profile', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({})
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            showToolModal('Profile Scraper Results', 'Profile data updated successfully!\n\nNew data:\n- Connections: 366\n- Followers: 405\n- Profile views: 1,247');
        } else {
            showToolModal('Profile Scraper Error', 'Error: ' + data.error);
        }
    });
}

function generateContent() {
    const topic = prompt('Enter content topic:');
    if (topic) {
        showToolModal('Content Generator', 'Generating AI content...');
        
        fetch('/api/content-ideas', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ topic: topic })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showToolModal('Generated Content', data.ideas.join('\n\n'));
            }
        });
    }
}

function generateBanner() {
    showToolModal('Banner Generator', 'Creating AI-powered banner...\n\nThis would integrate with:\n- DALL-E for image generation\n- Your brand colors and fonts\n- LinkedIn banner specifications\n\nResult: High-quality banner ready for upload');
}

function trackEngagement() {
    showToolModal('Engagement Tracker', 'Syncing engagement data...\n\nFetched:\n- 23 new likes\n- 7 comments\n- 3 shares\n- 15 profile views\n\nUpdated analytics dashboard');
}

// Automation functions
function toggleAutomation(type) {
    alert(`Toggling ${type} automation`);
}

function configureAutomation(type) {
    alert(`Configuring ${type} automation settings`);
}

// Setup functions
function setupCompetitorAnalysis() {
    const competitors = prompt('Enter LinkedIn URLs to track (comma-separated):');
    if (competitors) {
        alert('Competitor tracking setup completed!');
    }
}

function viewCompetitors() {
    showToolModal('Competitor Analysis', 'Tracked Competitors:\n\n1. AI Expert #1\n   - Followers: 15,000\n   - Growth: +2% this week\n   - Top post: 500 likes\n\n2. AI Expert #2\n   - Followers: 8,500\n   - Growth: +5% this week\n   - Top post: 300 likes');
}

// API configuration
function updateApiToken(service) {
    alert(`${service} API token updated successfully!`);
}

function testAllConnections() {
    showToolModal('Connection Test', 'Testing API connections...\n\n‚úÖ Apify: Connected\n‚ö†Ô∏è Google AI: Token needed\n‚ùå LinkedIn API: Not available\n\nRecommendation: Add Google AI token for content generation');
}

// Hashtag research
function researchHashtags() {
    showToolModal('Hashtag Research', 'Top trending AI hashtags:\n\n#AI - 2.1M posts\n#ArtificialIntelligence - 890K posts\n#MachineLearning - 1.5M posts\n#Automation - 650K posts\n#TechTrends - 420K posts\n#Innovation - 3.2M posts\n#DigitalTransformation - 780K posts\n\nRecommended for your niche:\n#AIAutomation, #ClaudeCode, #AITools');
}

function saveHashtagSet() {
    alert('Hashtag set saved to your content templates!');
}

// Modal functions
function showToolModal(title, content) {
    document.getElementById('toolModalTitle').textContent = title;
    document.getElementById('toolModalContent').innerHTML = content.replace(/\n/g, '<br>');
    document.getElementById('toolModal').classList.remove('hidden');
}

function closeToolModal() {
    document.getElementById('toolModal').classList.add('hidden');
}

function exportResults() {
    alert('Results exported to downloads folder');
}

// Configuration functions
function configureApi() {
    alert('Opening API configuration panel');
}

function configureContentAI() {
    alert('Opening content AI settings');
}

function viewEngagementData() {
    window.location.href = '/tracking';
}

function viewBannerTemplates() {
    alert('Opening banner template gallery');
}
</script>
{% endblock %}